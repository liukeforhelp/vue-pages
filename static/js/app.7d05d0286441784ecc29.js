webpackJsonp([1],{"7Wmn":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},r,!1,function(t){a("7Wmn")},null,null).exports,i=a("/ocq"),c=a("Xxa5"),o=a.n(c),p=a("exGp"),l=a.n(p),u={name:"myLive",data:function(){return{isCameraFlag:!0,base64:"",acc:"",str1:"",isImg:!1}},mounted:function(){var t=this;this.timer=setInterval(function(){t.isImg&&t.photograph()},1e3)},methods:{callCamera:function(){var t=this;this.isImg=!0,this.isCamera=!0,console.log(this.isCamera),navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(e){e.getVideoTracks();t.$refs.video.srcObject=e,t.isCameraFlag=!1,t.$refs.video.play()}).catch(function(e){console.error("摄像头开启失败，请检查摄像头是否可用！"),t.isCameraFlag=!0})},photograph:function(){var t=this;return l()(o.a.mark(function e(){var a,s,r,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$refs.canvas.getContext("2d").drawImage(t.$refs.video,0,0,500,376),a=t.$refs.canvas.toDataURL("image/jpeg",.7),s=a.replace("data:image/jpeg;base64,",""),t.base64=s,e.next=7,t.$http.post("/img",t.base64);case 7:r=e.sent,n=r.data,t.acc=n.acc;case 10:case"end":return e.stop()}},e,t)}))()},closeCamera:function(){(this.isImg=!1,this.$refs.video.srcObject)&&(this.$refs.video.srcObject.getTracks().forEach(function(t){t.stop()}),this.$refs.video.srcObject=null,this.isCameraFlag=!0)}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myLive"},[a("div",{staticClass:"top_button"},[t.isCameraFlag?a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",ghost:""},on:{click:t.callCamera}},[t._v("开始检测")]):a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"danger",ghost:""},on:{click:t.closeCamera}},[t._v("关闭检测")])],1),t._v(" "),a("video",{ref:"video",staticClass:"mt20",staticStyle:{background:"#d9d9d9"},attrs:{width:"500",height:"376",autoplay:""}}),t._v(" "),t.isImg?a("canvas",{ref:"canvas",attrs:{width:"500",height:"376"}}):t._e(),t._v(" "),t.isImg?a("p",[t._v("人脸相似度为："+t._s(t.acc))]):t._e()])},staticRenderFns:[]},d=a("VU/8")(u,m,!1,null,null,null).exports;s.a.use(i.a);var v=new i.a({routes:[{path:"/",name:"WebCamera",component:d}]}),h=a("mtWM"),g=a.n(h);s.a.config.productionTip=!1,g.a.defaults.baseURL="http://127.0.0.1:8082/",s.a.prototype.$http=g.a,new s.a({el:"#app",router:v,components:{App:n},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.7d05d0286441784ecc29.js.map