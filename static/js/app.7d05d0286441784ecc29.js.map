{"version":3,"sources":["webpack:///./src/App.vue?30ec","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///src/components/WebCamera.vue","webpack:///./src/components/WebCamera.vue?9b76","webpack:///./src/components/WebCamera.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","WebCamera","data","isCameraFlag","base64","acc","str1","isImg","mounted","_this","timer","setInterval","photograph","methods","callCamera","_this2","isCamera","console","log","navigator","mediaDevices","getUserMedia","audio","video","then","success","getVideoTracks","$refs","srcObject","play","catch","error","_this3","asyncToGenerator_default","regenerator_default","a","mark","_callee","imgBase64","str","_ref","res","wrap","_context","prev","next","getContext","drawImage","toDataURL","replace","$http","post","sent","stop","closeCamera","getTracks","forEach","track","components_WebCamera","_vm","staticClass","staticStyle","margin-right","type","ghost","on","click","_v","ref","background","width","height","autoplay","_e","_s","src_components_WebCamera","WebCamera_normalizeComponent","Vue","use","Router","router","routes","path","component","config","productionTip","axios","defaults","baseURL","prototype","el","components","App","template"],"mappings":"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","file":"static/js/app.7d05d0286441784ecc29.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-59e23fad\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-59e23fad\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59e23fad\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<template>\n  <div class=\"myLive\">\n    <div class=\"top_button\">\n      <!--开启摄像头-->\n      <Button\n        v-if=\"isCameraFlag\"\n        type=\"primary\"\n        ghost\n        @click=\"callCamera\"\n        style=\"margin-right: 10px\"\n        >开始检测</Button\n      >\n      <!--关闭摄像头-->\n      <Button\n        v-else\n        type=\"danger\"\n        ghost\n        @click=\"closeCamera\"\n        style=\"margin-right: 10px\"\n        >关闭检测</Button\n      >\n      <!--拍照-->\n      <!-- <Button type=\"primary\" @click=\"photograph\"></Button> -->\n    </div>\n    <!--图片展示-->\n    <video\n      ref=\"video\"\n      width=\"500\"\n      height=\"376\"\n      autoplay\n      class=\"mt20\"\n      style=\"background: #d9d9d9\"\n    ></video>\n    <!--canvas截取流-->\n    <canvas ref=\"canvas\" width=\"500\" height=\"376\" v-if=\"isImg\" ></canvas>\n    <p v-if=\"isImg\">人脸相似度为：{{ acc }}</p>\n  </div>\n</template>\n\n\n\n<script>\nexport default {\n  name: \"myLive\",\n  data() {\n    return {\n      isCameraFlag: true,\n      base64: \"\",\n      acc: \"\",\n      str1: \"\",\n      isImg: false,\n    };\n  },\n\n  // 循环控制器\n  mounted() {\n    // this.timer = setInterval(this.photograph, 1000);\n    this.timer = setInterval(() => {\n      // 要执行的函数\n      // console.log(this.isImg)\n      if (this.isImg) {\n        this.photograph();\n      }\n    }, 1000);\n  },\n\n  methods: {\n    // 调用摄像头\n    callCamera() {\n      this.isImg = true\n      this.isCamera = true;\n      console.log(this.isCamera);\n      // H5调用电脑摄像头API\n      navigator.mediaDevices\n        .getUserMedia({\n          audio: true, //开启音频\n          video: true, //开启视频\n        })\n        .then((success) => {\n          var videoTracks = success.getVideoTracks();\n          this.$refs[\"video\"].srcObject = success;\n          this.isCameraFlag = false;\n          // 实时拍照效果\n          this.$refs[\"video\"].play();\n        })\n        .catch((error) => {\n          console.error(\"摄像头开启失败，请检查摄像头是否可用！\");\n          this.isCameraFlag = true;\n        });\n    },\n\n    // 拍照\n    async photograph() {\n      let ctx = this.$refs[\"canvas\"].getContext(\"2d\");\n      ctx.drawImage(this.$refs[\"video\"], 0, 0, 500, 376);\n      let imgBase64 = this.$refs[\"canvas\"].toDataURL(\"image/jpeg\", 0.7);\n      let str = imgBase64.replace(\"data:image/jpeg;base64,\", \"\");\n      this.base64 = str;\n      const { data: res } = await this.$http.post(\"/img\", this.base64);\n \n      this.acc = res.acc;\n    },\n\n    // 关闭摄像头\n    closeCamera() {\n      this.isImg=false\n      if (!this.$refs[\"video\"].srcObject) return;\n      let stream = this.$refs[\"video\"].srcObject;\n      let tracks = stream.getTracks();\n      tracks.forEach((track) => {\n        track.stop();\n      });\n      this.$refs[\"video\"].srcObject = null;\n      this.isCameraFlag = true;\n    },\n  },\n};\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/WebCamera.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"myLive\"},[_c('div',{staticClass:\"top_button\"},[(_vm.isCameraFlag)?_c('Button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.callCamera}},[_vm._v(\"开始检测\")]):_c('Button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"danger\",\"ghost\":\"\"},on:{\"click\":_vm.closeCamera}},[_vm._v(\"关闭检测\")])],1),_vm._v(\" \"),_c('video',{ref:\"video\",staticClass:\"mt20\",staticStyle:{\"background\":\"#d9d9d9\"},attrs:{\"width\":\"500\",\"height\":\"376\",\"autoplay\":\"\"}}),_vm._v(\" \"),(_vm.isImg)?_c('canvas',{ref:\"canvas\",attrs:{\"width\":\"500\",\"height\":\"376\"}}):_vm._e(),_vm._v(\" \"),(_vm.isImg)?_c('p',[_vm._v(\"人脸相似度为：\"+_vm._s(_vm.acc))]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7a270e7c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/WebCamera.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./WebCamera.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./WebCamera.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a270e7c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./WebCamera.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/WebCamera.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport WebCamera from '../components/WebCamera'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'WebCamera',\n      component: WebCamera\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nVue.config.productionTip = false\n\n// axios\nimport axios from 'axios'\naxios.defaults.baseURL = 'http://127.0.0.1:8082/'\nVue.prototype.$http = axios\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}